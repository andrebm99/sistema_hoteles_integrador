<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/_layout_usuarios" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Cuenta</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" th:href="@{/css/shared.css}">
    <link rel="stylesheet" href="/css/ajustescuenta.css">
</head>
<body>
    <div th:replace="~{_layout::main-header}"></div>

<div layout:fragment="content">
    <div class="container-fluid-aurum">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-lg-3">
                <div class="sidebar">
                    <div class="profile-section">
                        <img src="/img/IconUser.png" alt="Usuario" class="profile-pic">
                        <div class="profile-info">
                            <strong th:text="${user != null ? (user.nombres + ' ' + (user.apellidos != null ? user.apellidos : '')) : 'Usuario'}">Usuario</strong>
                            <p>Usuario</p>
                        </div>
                        <i class="bi bi-three-dots-vertical"></i>
                    </div>
                    <a href="#cuenta-section" class="btn btn-sidebar active">DATOS PERSONALES</a>
                    <a href="#metodos-pago-section" class="btn btn-sidebar">MÉTODOS DE PAGO</a>
                    <a href="#configuracion-section" class="btn btn-sidebar">CONFIGURACIÓN Y PRIVACIDAD</a>
                </div>
            </div>

            <!-- Contenido -->
            <div class="col-lg-9">
                <div class="main-content">
                    <!-- Perfil de usuario -->
                    <div id="cuenta-section" class="content-section">
                         <div class="row">
                            <div class="col-md-4 text-center">
                                <h5>FOTO</h5>
                                <img src="/img/IconUser.png" alt="Foto de perfil" class="img-fluid rounded-circle mb-3">
                            </div>
                            <div class="col-md-8">
                                <div class="mb-3">
                                  <div class="alert alert-success" th:if="${success}" th:text="${success}"></div>
                                  <div class="alert alert-danger" th:if="${error}" th:text="${error}"></div>
                                </div>
                                <form method="POST" th:action="@{/ajustescuenta}" th:object="${user}">
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                          <label for="nombres" class="form-label">Nombres</label>
                                          <input type="text" class="form-control" th:field="*{nombres}" required>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                          <label for="apellidos" class="form-label">Apellidos</label>
                                          <input type="text" class="form-control" th:field="*{apellidos}" required>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                          <label for="fechaNacimiento" class="form-label">Fecha de nacimiento</label>
                                          <input type="date" class="form-control" id="fechaNacimiento" name="fechaNacimiento" th:value="${user.fechaNacimiento != null ? #temporals.format(user.fechaNacimiento, 'yyyy-MM-dd') : ''}">
                                        </div>
                                        <div class="col-md-6 mb-3">
                                          <label for="genero" class="form-label">Género</label>
                                          <input type="text" class="form-control" th:field="*{genero}">
                                        </div>
                                        <div class="col-md-6 mb-3">
                                          <label for="dni" class="form-label">DNI</label>
                                          <input type="text" class="form-control" th:field="*{dni}">
                                        </div>
                                        <div class="col-md-6 mb-3">
                                          <label for="direccion" class="form-label">Dirección</label>
                                          <input type="text" class="form-control" th:field="*{direccion}">
                                        </div>
                                        <div class="col-md-6 mb-3">
                                          <label for="ciudad" class="form-label">Ciudad</label>
                                          <input type="text" class="form-control" th:field="*{ciudad}">
                                        </div>
                                        <div class="col-md-6 mb-3">
                                          <label for="distrito" class="form-label">Distrito</label>
                                          <input type="text" class="form-control" th:field="*{distrito}">
                                        </div>
                                        <div class="col-md-12 mb-3">
                                          <label for="email" class="form-label">Email</label>
                                          <input type="email" class="form-control" th:field="*{email}" required>
                                        </div>
                                        <div class="col-12 mt-3">
                                          <button type="submit" class="btn btn-update-info w-100">Actualizar Información</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Ajustar metodo de pago -->
                    <div id="metodos-pago-section" class="content-section" style="display:none;">
                         <div class="row">
                            <div class="col-md-5">
                                <div class="payment-methods">
                                    <h5>CAMBIA TU MÉTODO DE PAGO</h5>
                                    <div class="method-card active"><i class="bi bi-credit-card-fill"></i><div><strong>Tarjeta</strong><p>Crédito/Débito</p></div></div>
                                    <div class="method-card"><i class="bi bi-paypal"></i><div><strong>PayPal</strong><p>Pago Seguro</p></div></div>
                                    <div class="method-card"><i class="bi bi-arrow-down-up"></i><div><strong>Transferencia</strong><p>Sube Comprobante</p></div></div>
                                    <div class="bank-logos"><img src="/img/bcp-logo.png" alt="BCP"><img src="/img/bbva-logo.png" alt="BBVA"><img src="/img/scotiabank-logo.jpg" alt="Scotiabank"><img src="/img/interbank-logo.png" alt="Interbank"></div>
                                    <p class="text-center mt-2">Perú</p>
                                </div>
                            </div>
                             <div class="col-md-7">
                                 <div class="payment-details">
                                     <h5>DATOS DEL MÉTODO</h5>
                                     <form>
                                         <div class="mb-3"><label for="card-holder" class="form-label">Nombre del titular de la tarjeta</label><input type="text" class="form-control" id="card-holder"></div>
                                         <div class="mb-3"><label for="card-number-payment" class="form-label">Número de tarjeta</label><input type="text" class="form-control" id="card-number-payment"></div>
                                         <div class="row">
                                             <div class="col-md-6 mb-3"><label for="expiry-date" class="form-label">Fecha de caducidad</label><input type="text" class="form-control" id="expiry-date" placeholder="MM/AA"></div>
                                             <div class="col-md-6 mb-3"><label for="cvv" class="form-label">CVV</label><input type="text" class="form-control" id="cvv"></div>
                                         </div>
                                         <button type="submit" class="btn btn-confirm w-100">Confirmar Método</button>
                                     </form>
                                 </div>
                             </div>
                         </div>
                    </div>

                    <!-- Configuracion de privacidad -->
                    <div id="configuracion-section" class="content-section" style="display:none;">
                        <h5>CONFIGURACIÓN Y PRIVACIDAD</h5>
                        <div class="config-box">
                            <p><strong>Cuenta</strong></p>
                            <a href="#cuenta-section" class="internal-link">- Editar datos personales <i class="bi bi-caret-right-fill"></i></a>
                            <div class="config-item"><span>- Idioma</span><select class="form-select" aria-label="Idioma"><option selected>Español</option><option>English</option></select></div>
                            <div class="config-item"><span>- Moneda</span><select class="form-select" aria-label="Moneda"><option selected>PEN (S/)</option><option>USD ($)</option></select></div>
                            <p class="mt-4"><strong>Configuración de notificaciones</strong></p>
                            <div class="config-item"><span>- Habilitar Notificaciones</span><select class="form-select" aria-label="Habilitar Notificaciones"><option value="si" selected>Sí</option><option value="no">No</option></select></div>
                            <div class="config-item"><span>- Recibir promociones</span><select class="form-select" aria-label="Recibir promociones"><option value="si" selected>Sí</option><option value="no">No</option></select></div>
                            <div class="config-item"><span>- Recibir actualizaciones de servicio</span><select class="form-select" aria-label="Recibir actualizaciones de servicio"><option value="si" selected>Sí</option><option value="no">No</option></select></div>
                            <p class="mt-4"><strong>Soporte y ayuda</strong></p>
                            <a href="#">- Reservar cita con administración <i class="bi bi-caret-right-fill"></i></a>
                            <a href="#">- Preguntas frecuentes <i class="bi bi-caret-right-fill"></i></a>
                            <a href="#">- Eliminar cuenta <i class="bi bi-caret-right-fill"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div th:replace="~{_layout::footer}"></div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
  <script th:src="@{/js/ajustescuenta.js}"></script>
</body>
</html>
